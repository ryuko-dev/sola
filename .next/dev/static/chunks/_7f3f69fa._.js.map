{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/sinan/sola/lib/storage.ts"],"sourcesContent":["// User-specific storage utilities\r\nexport interface UserData {\r\n  projects: any[]\r\n  users: any[]\r\n  allocations: any[]\r\n  positions: any[]\r\n  startMonth?: number\r\n  startYear?: number\r\n  systemUsers?: SystemUser[] // Global system users (for login)\r\n}\r\n\r\nexport interface SystemUser {\r\n  id: string\r\n  email: string\r\n  name: string\r\n  password: string\r\n  role: 'admin' | 'editor' | 'viewer'\r\n  isActive: boolean\r\n  createdAt: string\r\n}\r\n\r\nconst STORAGE_KEYS = {\r\n  CURRENT_USER: \"sola-current-user\",\r\n  USER_DATA_PREFIX: \"sola-user-data-\",\r\n  SYSTEM_USERS: \"sola-system-users\", // Global user registry\r\n} as const\r\n\r\nexport function getSystemUsers(): SystemUser[] {\r\n  if (typeof window === 'undefined') return []\r\n  const data = localStorage.getItem(STORAGE_KEYS.SYSTEM_USERS)\r\n  return data ? JSON.parse(data) : []\r\n}\r\n\r\nexport function setSystemUsers(users: SystemUser[]): void {\r\n  if (typeof window === 'undefined') return\r\n  localStorage.setItem(STORAGE_KEYS.SYSTEM_USERS, JSON.stringify(users))\r\n}\r\n\r\nexport function addSystemUser(user: Omit<SystemUser, 'id' | 'createdAt'>): SystemUser {\r\n  const users = getSystemUsers()\r\n  const newUser: SystemUser = {\r\n    ...user,\r\n    id: `system-user-${Date.now()}`,\r\n    createdAt: new Date().toISOString(),\r\n  }\r\n  setSystemUsers([...users, newUser])\r\n  return newUser\r\n}\r\n\r\nexport function updateSystemUser(id: string, updates: Partial<SystemUser>): void {\r\n  const users = getSystemUsers()\r\n  const updated = users.map(u => u.id === id ? { ...u, ...updates } : u)\r\n  setSystemUsers(updated)\r\n}\r\n\r\nexport function deleteSystemUser(id: string): void {\r\n  const users = getSystemUsers()\r\n  setSystemUsers(users.filter(u => u.id !== id))\r\n}\r\n\r\nexport function authenticateUser(email: string, password: string): SystemUser | null {\r\n  const users = getSystemUsers()\r\n  return users.find(u => u.email === email && u.password === password && u.isActive) || null\r\n}\r\n\r\nexport function getCurrentUser(): string | null {\r\n  if (typeof window === 'undefined') return null\r\n  return localStorage.getItem(STORAGE_KEYS.CURRENT_USER)\r\n}\r\n\r\nexport function getCurrentSystemUser(): SystemUser | null {\r\n  const email = getCurrentUser()\r\n  if (!email) return null\r\n  const users = getSystemUsers()\r\n  return users.find(u => u.email === email) || null\r\n}\r\n\r\nexport function setCurrentUser(email: string): void {\r\n  if (typeof window === 'undefined') return\r\n  localStorage.setItem(STORAGE_KEYS.CURRENT_USER, email)\r\n}\r\n\r\nexport function clearCurrentUser(): void {\r\n  if (typeof window === 'undefined') return\r\n  localStorage.removeItem(STORAGE_KEYS.CURRENT_USER)\r\n}\r\n\r\nexport function getUserData(email: string): UserData {\r\n  if (typeof window === 'undefined') return { projects: [], users: [], allocations: [], positions: [] }\r\n  \r\n  const data = localStorage.getItem(STORAGE_KEYS.USER_DATA_PREFIX + email)\r\n  return data ? JSON.parse(data) : { projects: [], users: [], allocations: [], positions: [] }\r\n}\r\n\r\nexport function setUserData(email: string, data: Partial<UserData>): void {\r\n  if (typeof window === 'undefined') return\r\n  \r\n  const existing = getUserData(email)\r\n  const updated = { ...existing, ...data }\r\n  localStorage.setItem(STORAGE_KEYS.USER_DATA_PREFIX + email, JSON.stringify(updated))\r\n}\r\n\r\nexport function clearUserData(email: string): void {\r\n  if (typeof window === 'undefined') return\r\n  localStorage.removeItem(STORAGE_KEYS.USER_DATA_PREFIX + email)\r\n}\r\n\r\n// Convenience functions that work with the current user\r\nexport function getCurrentUserData(): UserData {\r\n  const currentUser = getCurrentUser()\r\n  if (!currentUser) return { projects: [], users: [], allocations: [], positions: [] }\r\n  return getUserData(currentUser)\r\n}\r\n\r\nexport function setCurrentUserData(data: Partial<UserData>): void {\r\n  const currentUser = getCurrentUser()\r\n  if (!currentUser) return\r\n  setUserData(currentUser, data)\r\n}\r\n"],"names":[],"mappings":"AAAA,kCAAkC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqBlC,MAAM,eAAe;IACnB,cAAc;IACd,kBAAkB;IAClB,cAAc;AAChB;AAEO,SAAS;IACd;;IACA,MAAM,OAAO,aAAa,OAAO,CAAC,aAAa,YAAY;IAC3D,OAAO,OAAO,KAAK,KAAK,CAAC,QAAQ,EAAE;AACrC;AAEO,SAAS,eAAe,KAAmB;IAChD;;IACA,aAAa,OAAO,CAAC,aAAa,YAAY,EAAE,KAAK,SAAS,CAAC;AACjE;AAEO,SAAS,cAAc,IAA0C;IACtE,MAAM,QAAQ;IACd,MAAM,UAAsB;QAC1B,GAAG,IAAI;QACP,IAAI,CAAC,YAAY,EAAE,KAAK,GAAG,IAAI;QAC/B,WAAW,IAAI,OAAO,WAAW;IACnC;IACA,eAAe;WAAI;QAAO;KAAQ;IAClC,OAAO;AACT;AAEO,SAAS,iBAAiB,EAAU,EAAE,OAA4B;IACvE,MAAM,QAAQ;IACd,MAAM,UAAU,MAAM,GAAG,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK,KAAK;YAAE,GAAG,CAAC;YAAE,GAAG,OAAO;QAAC,IAAI;IACpE,eAAe;AACjB;AAEO,SAAS,iBAAiB,EAAU;IACzC,MAAM,QAAQ;IACd,eAAe,MAAM,MAAM,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK;AAC5C;AAEO,SAAS,iBAAiB,KAAa,EAAE,QAAgB;IAC9D,MAAM,QAAQ;IACd,OAAO,MAAM,IAAI,CAAC,CAAA,IAAK,EAAE,KAAK,KAAK,SAAS,EAAE,QAAQ,KAAK,YAAY,EAAE,QAAQ,KAAK;AACxF;AAEO,SAAS;IACd;;IACA,OAAO,aAAa,OAAO,CAAC,aAAa,YAAY;AACvD;AAEO,SAAS;IACd,MAAM,QAAQ;IACd,IAAI,CAAC,OAAO,OAAO;IACnB,MAAM,QAAQ;IACd,OAAO,MAAM,IAAI,CAAC,CAAA,IAAK,EAAE,KAAK,KAAK,UAAU;AAC/C;AAEO,SAAS,eAAe,KAAa;IAC1C;;IACA,aAAa,OAAO,CAAC,aAAa,YAAY,EAAE;AAClD;AAEO,SAAS;IACd;;IACA,aAAa,UAAU,CAAC,aAAa,YAAY;AACnD;AAEO,SAAS,YAAY,KAAa;IACvC;;IAEA,MAAM,OAAO,aAAa,OAAO,CAAC,aAAa,gBAAgB,GAAG;IAClE,OAAO,OAAO,KAAK,KAAK,CAAC,QAAQ;QAAE,UAAU,EAAE;QAAE,OAAO,EAAE;QAAE,aAAa,EAAE;QAAE,WAAW,EAAE;IAAC;AAC7F;AAEO,SAAS,YAAY,KAAa,EAAE,IAAuB;IAChE;;IAEA,MAAM,WAAW,YAAY;IAC7B,MAAM,UAAU;QAAE,GAAG,QAAQ;QAAE,GAAG,IAAI;IAAC;IACvC,aAAa,OAAO,CAAC,aAAa,gBAAgB,GAAG,OAAO,KAAK,SAAS,CAAC;AAC7E;AAEO,SAAS,cAAc,KAAa;IACzC;;IACA,aAAa,UAAU,CAAC,aAAa,gBAAgB,GAAG;AAC1D;AAGO,SAAS;IACd,MAAM,cAAc;IACpB,IAAI,CAAC,aAAa,OAAO;QAAE,UAAU,EAAE;QAAE,OAAO,EAAE;QAAE,aAAa,EAAE;QAAE,WAAW,EAAE;IAAC;IACnF,OAAO,YAAY;AACrB;AAEO,SAAS,mBAAmB,IAAuB;IACxD,MAAM,cAAc;IACpB,IAAI,CAAC,aAAa;IAClB,YAAY,aAAa;AAC3B"}},
    {"offset": {"line": 151, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/sinan/sola/lib/utils.ts"],"sourcesContent":["import { clsx, type ClassValue } from 'clsx'\r\nimport { twMerge } from 'tailwind-merge'\r\n\r\nexport function cn(...inputs: ClassValue[]) {\r\n  return twMerge(clsx(inputs))\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,SAAS,GAAG,GAAG,MAAoB;IACxC,OAAO,IAAA,yKAAO,EAAC,IAAA,gJAAI,EAAC;AACtB"}},
    {"offset": {"line": 169, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/sinan/sola/components/ui/button.tsx"],"sourcesContent":["import * as React from 'react'\r\nimport { Slot } from '@radix-ui/react-slot'\r\nimport { cva, type VariantProps } from 'class-variance-authority'\r\n\r\nimport { cn } from '@/lib/utils'\r\n\r\nconst buttonVariants = cva(\r\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive\",\r\n  {\r\n    variants: {\r\n      variant: {\r\n        default: 'bg-primary text-primary-foreground hover:bg-primary/90',\r\n        destructive:\r\n          'bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60',\r\n        outline:\r\n          'border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50',\r\n        secondary:\r\n          'bg-secondary text-secondary-foreground hover:bg-secondary/80',\r\n        ghost:\r\n          'hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50',\r\n        link: 'text-primary underline-offset-4 hover:underline',\r\n      },\r\n      size: {\r\n        default: 'h-9 px-4 py-2 has-[>svg]:px-3',\r\n        sm: 'h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5',\r\n        lg: 'h-10 rounded-md px-6 has-[>svg]:px-4',\r\n        icon: 'size-9',\r\n        'icon-sm': 'size-8',\r\n        'icon-lg': 'size-10',\r\n      },\r\n    },\r\n    defaultVariants: {\r\n      variant: 'default',\r\n      size: 'default',\r\n    },\r\n  },\r\n)\r\n\r\nfunction Button({\r\n  className,\r\n  variant,\r\n  size,\r\n  asChild = false,\r\n  ...props\r\n}: React.ComponentProps<'button'> &\r\n  VariantProps<typeof buttonVariants> & {\r\n    asChild?: boolean\r\n  }) {\r\n  const Comp = asChild ? Slot : 'button'\r\n\r\n  return (\r\n    <Comp\r\n      data-slot=\"button\"\r\n      className={cn(buttonVariants({ variant, size, className }))}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nexport { Button, buttonVariants }\r\n"],"names":[],"mappings":";;;;;;;AACA;AACA;AAEA;;;;;AAEA,MAAM,iBAAiB,IAAA,0KAAG,EACxB,+bACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,aACE;YACF,SACE;YACF,WACE;YACF,OACE;YACF,MAAM;QACR;QACA,MAAM;YACJ,SAAS;YACT,IAAI;YACJ,IAAI;YACJ,MAAM;YACN,WAAW;YACX,WAAW;QACb;IACF;IACA,iBAAiB;QACf,SAAS;QACT,MAAM;IACR;AACF;AAGF,SAAS,OAAO,EACd,SAAS,EACT,OAAO,EACP,IAAI,EACJ,UAAU,KAAK,EACf,GAAG,OAIF;IACD,MAAM,OAAO,UAAU,2KAAI,GAAG;IAE9B,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EAAC,eAAe;YAAE;YAAS;YAAM;QAAU;QACvD,GAAG,KAAK;;;;;;AAGf;KAnBS"}},
    {"offset": {"line": 234, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/sinan/sola/app/actual-allocation/page.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport * as React from \"react\"\r\nimport * as XLSX from \"xlsx\"\r\nimport type { User } from \"@/lib/types\"\r\nimport { getCurrentUser, getCurrentUserData, getCurrentSystemUser, clearCurrentUser } from \"@/lib/storage\"\r\nimport { Button } from \"@/components/ui/button\"\r\nimport Link from \"next/link\"\r\n\r\nconst MONTHS = [\r\n  \"January\", \"February\", \"March\", \"April\", \"May\", \"June\",\r\n  \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"\r\n]\r\n\r\ninterface PayrollData {\r\n  currency: string\r\n  netSalary: number\r\n  socialSecurity: number\r\n  employeeTax: number\r\n  employerTax: number\r\n  housing: number\r\n  otherBenefits: number\r\n}\r\n\r\ninterface FringeData {\r\n  workingDays: number\r\n  annualLeave: number\r\n  sickLeave: number\r\n  publicHolidays: number\r\n  dailyRate: number\r\n}\r\n\r\ninterface UserExtended extends User {\r\n  entity?: string\r\n  payrollDataByMonth?: Record<string, PayrollData> // key: \"year-month\" (e.g., \"2024-0\")\r\n  fringeDataByMonth?: Record<string, FringeData> // key: \"year-month\" (e.g., \"2024-0\")\r\n  projectDataByMonth?: Record<string, Record<string, number>> // key: \"year-month\" -> projectId -> allocation percentage\r\n}\r\n\r\ninterface MonthlyAllocationItem {\r\n  id: string\r\n  name: string\r\n  code: string\r\n  description: string\r\n  currency: string\r\n  amount: number\r\n  project: string\r\n  projectTask: string\r\n  account: string\r\n}\r\n\r\nexport default function ActualAllocationPage() {\r\n  const [currentUser, setCurrentUser] = React.useState<string | null>(null)\r\n  const [users, setUsers] = React.useState<UserExtended[]>([])\r\n  const [projects, setProjects] = React.useState<any[]>([])\r\n  const [selectedMonth, setSelectedMonth] = React.useState<number>(new Date().getMonth())\r\n  const [selectedYear, setSelectedYear] = React.useState<number>(new Date().getFullYear())\r\n  const [isLocked, setIsLocked] = React.useState<boolean>(false)\r\n  const [monthlyAllocation, setMonthlyAllocation] = React.useState<MonthlyAllocationItem[]>([])\r\n  const [showPercentage, setShowPercentage] = React.useState<boolean>(false)\r\n  const [isClient, setIsClient] = React.useState<boolean>(false)\r\n\r\n  // Handle client-side hydration\r\n  React.useEffect(() => {\r\n    setIsClient(true)\r\n  }, [])\r\n\r\n  // Load user data on component mount\r\n  React.useEffect(() => {\r\n    const user = getCurrentUser()\r\n    const systemUser = getCurrentSystemUser()\r\n    if (!user || !systemUser) {\r\n      window.location.href = \"/login\"\r\n      return\r\n    }\r\n    \r\n    setCurrentUser(user)\r\n    \r\n    // Load users and projects data from localStorage\r\n    const userData = getCurrentUserData()\r\n    const monthKey = `${selectedYear}-${selectedMonth}`\r\n    \r\n    // Load projects\r\n    setProjects(userData.projects || [])\r\n    \r\n    // Load lock state (only admin can change it)\r\n    if (systemUser.role === 'admin') {\r\n      const savedLockState = localStorage.getItem(`sola-lock-state-${user}`)\r\n      setIsLocked(savedLockState === 'true')\r\n    }\r\n    \r\n    // Initialize monthly allocation items\r\n    const savedMonthlyAllocation = localStorage.getItem(`sola-monthly-allocation-${user}-${monthKey}`)\r\n    \r\n    if (savedMonthlyAllocation) {\r\n      setMonthlyAllocation(JSON.parse(savedMonthlyAllocation))\r\n    } else {\r\n      // Initialize with default items for each staff member and account category\r\n      const accountCategories = [\r\n        { name: 'Net Salary', code: '631 0001' },\r\n        { name: 'Fringe Benefit - Leave', code: '631 0001' },\r\n        { name: 'Social Security', code: '635 1001' },\r\n        { name: 'Employee Tax', code: '620 1005' },\r\n        { name: 'Employer Tax', code: '620 1005' },\r\n        { name: 'Housing', code: '635 4001' },\r\n        { name: 'Other Benefits', code: '602 4001' }\r\n      ]\r\n      \r\n      const defaultItems: MonthlyAllocationItem[] = []\r\n      userData.users.forEach(user => {\r\n        accountCategories.forEach((category, index) => {\r\n          defaultItems.push({\r\n            id: `${user.id}-${category.code}-${index}`,\r\n            name: user.name,\r\n            code: category.code,\r\n            description: `${user.name} - ${category.name} for ${MONTHS[selectedMonth]} ${selectedYear}`,\r\n            currency: 'USD',\r\n            amount: 0,\r\n            project: '',\r\n            projectTask: '',\r\n            account: `${category.name} [${category.code}]`\r\n          })\r\n        })\r\n      })\r\n      setMonthlyAllocation(defaultItems)\r\n    }\r\n    \r\n    const usersWithPayroll = userData.users.map(user => {\r\n      // Load existing monthly data or create new empty structure\r\n      const existingPayrollData = (user as any).payrollDataByMonth?.[monthKey]\r\n      const existingFringeData = (user as any).fringeDataByMonth?.[monthKey]\r\n      const existingProjectData = (user as any).projectDataByMonth?.[monthKey]\r\n      \r\n      return {\r\n        ...user,\r\n        entity: user.entity || \"Unassigned\",\r\n        payrollDataByMonth: {\r\n          ...(user as any).payrollDataByMonth,\r\n          [monthKey]: existingPayrollData || {\r\n            currency: \"USD\",\r\n            netSalary: 0,\r\n            socialSecurity: 0,\r\n            employeeTax: 0,\r\n            employerTax: 0,\r\n            housing: 0,\r\n            otherBenefits: 0\r\n          }\r\n        },\r\n        fringeDataByMonth: {\r\n          ...(user as any).fringeDataByMonth,\r\n          [monthKey]: existingFringeData || {\r\n            workingDays: calculateWorkingDays(user.workDays || 'mon-fri', selectedMonth, selectedYear),\r\n            annualLeave: 0,\r\n            sickLeave: 0,\r\n            publicHolidays: 0,\r\n            dailyRate: 0\r\n          }\r\n        },\r\n        projectDataByMonth: {\r\n          ...(user as any).projectDataByMonth,\r\n          [monthKey]: existingProjectData || {}\r\n        }\r\n      }\r\n    })\r\n    setUsers(usersWithPayroll)\r\n  }, [])\r\n\r\n  // Check if current user is admin\r\n  const isAdmin = () => {\r\n    const systemUser = getCurrentSystemUser()\r\n    return systemUser?.role === 'admin'\r\n  }\r\n\r\n  // Toggle lock state (admin only)\r\n  const toggleLock = () => {\r\n    if (!isAdmin()) return\r\n    \r\n    const newLockState = !isLocked\r\n    setIsLocked(newLockState)\r\n    \r\n    // Save lock state to localStorage\r\n    const user = getCurrentUser()\r\n    if (user) {\r\n      localStorage.setItem(`sola-lock-state-${user}`, newLockState.toString())\r\n    }\r\n  }\r\n\r\n  // Recalculate working days when month/year changes\r\n  React.useEffect(() => {\r\n    const monthKey = `${selectedYear}-${selectedMonth}`\r\n    setUsers(prevUsers => \r\n      prevUsers.map(user => ({\r\n        ...user,\r\n        fringeDataByMonth: {\r\n          ...user.fringeDataByMonth,\r\n          [monthKey]: {\r\n            ...(user.fringeDataByMonth?.[monthKey] || {\r\n              annualLeave: 0,\r\n              sickLeave: 0,\r\n              publicHolidays: 0,\r\n              dailyRate: 0\r\n            }),\r\n            workingDays: calculateWorkingDays(user.workDays || 'mon-fri', selectedMonth, selectedYear)\r\n          }\r\n        }\r\n      }))\r\n    )\r\n  }, [selectedMonth, selectedYear])\r\n\r\n  // Reload monthly allocation when month/year changes\r\n  React.useEffect(() => {\r\n    const user = getCurrentUser()\r\n    if (!user) return\r\n    \r\n    const monthKey = `${selectedYear}-${selectedMonth}`\r\n    const savedMonthlyAllocation = localStorage.getItem(`sola-monthly-allocation-${user}-${monthKey}`)\r\n    const userData = getCurrentUserData()\r\n    \r\n    if (savedMonthlyAllocation) {\r\n      const loadedData = JSON.parse(savedMonthlyAllocation)\r\n      // Update descriptions with current month/year, preserving account category\r\n      const updatedData = loadedData.map((item: MonthlyAllocationItem) => {\r\n        // Extract account category name from the account field\r\n        const accountName = item.account.split(' [')[0]\r\n        return {\r\n          ...item,\r\n          description: `${item.name} - ${accountName} ${MONTHS[selectedMonth]} ${selectedYear}`\r\n        }\r\n      })\r\n      setMonthlyAllocation(updatedData)\r\n    } else {\r\n      // Initialize with default items for each staff member and account category\r\n      const accountCategories = [\r\n        { name: 'Net Salary', code: '631 0001' },\r\n        { name: 'Fringe Benefit - Leave', code: '631 0001' },\r\n        { name: 'Social Security', code: '635 1001' },\r\n        { name: 'Employee Tax', code: '620 1005' },\r\n        { name: 'Employer Tax', code: '620 1005' },\r\n        { name: 'Housing', code: '635 4001' },\r\n        { name: 'Other Benefits', code: '602 4001' }\r\n      ]\r\n      \r\n      const defaultItems: MonthlyAllocationItem[] = []\r\n      userData.users.forEach(user => {\r\n        accountCategories.forEach((category, index) => {\r\n          defaultItems.push({\r\n            id: `${user.id}-${category.code}-${index}`,\r\n            name: user.name,\r\n            code: category.code,\r\n            description: `${user.name} - ${category.name} for ${MONTHS[selectedMonth]} ${selectedYear}`,\r\n            currency: 'USD',\r\n            amount: 0,\r\n            project: '',\r\n            projectTask: '',\r\n            account: `${category.name} [${category.code}]`\r\n          })\r\n        })\r\n      })\r\n      setMonthlyAllocation(defaultItems)\r\n    }\r\n  }, [selectedMonth, selectedYear])\r\n\r\n  // Calculate working days based on user's work pattern\r\n  const calculateWorkingDays = (workPattern: 'mon-fri' | 'sun-thu', month: number, year: number): number => {\r\n    const date = new Date(year, month, 1)\r\n    const daysInMonth = new Date(year, month + 1, 0).getDate()\r\n    let workingDays = 0\r\n    \r\n    for (let day = 1; day <= daysInMonth; day++) {\r\n      date.setDate(day)\r\n      const dayOfWeek = date.getDay()\r\n      \r\n      if (workPattern === 'mon-fri') {\r\n        if (dayOfWeek >= 1 && dayOfWeek <= 5) workingDays++\r\n      } else {\r\n        if (dayOfWeek >= 0 && dayOfWeek <= 4) workingDays++\r\n      }\r\n    }\r\n    \r\n    return workingDays\r\n  }\r\n\r\n  // Filter projects that are active in the selected month\r\n  const getActiveProjects = () => {\r\n    const monthIndex = (selectedYear - 2024) * 12 + selectedMonth\r\n    return projects.filter(project => {\r\n      const projectStartMonth = (project.startYear - 2024) * 12 + (project.startMonth || 0)\r\n      const projectEndMonth = (project.endYear - 2024) * 12 + (project.endMonth || 11)\r\n      return monthIndex >= projectStartMonth && monthIndex <= projectEndMonth\r\n    })\r\n  }\r\n\r\n  // Handle cell value changes\r\n  const handleCellValueChange = (userId: string, field: string, value: string, section: 'payroll' | 'fringe' | 'project', projectId?: string) => {\r\n    // Prevent changes if locked\r\n    if (isLocked) return\r\n    \r\n    const monthKey = `${selectedYear}-${selectedMonth}`\r\n    const numValue = parseFloat(value) || 0\r\n    \r\n    setUsers(prevUsers => {\r\n      const updatedUsers = prevUsers.map(user => {\r\n        if (user.id === userId) {\r\n          if (section === 'payroll') {\r\n            return {\r\n              ...user,\r\n              payrollDataByMonth: {\r\n                ...user.payrollDataByMonth,\r\n                [monthKey]: {\r\n                  ...(user.payrollDataByMonth?.[monthKey] || {\r\n                    currency: \"USD\",\r\n                    netSalary: 0,\r\n                    socialSecurity: 0,\r\n                    employeeTax: 0,\r\n                    employerTax: 0,\r\n                    housing: 0,\r\n                    otherBenefits: 0\r\n                  }),\r\n                  [field]: field === 'currency' ? value : numValue\r\n                }\r\n              }\r\n            }\r\n          } else if (section === 'fringe') {\r\n            return {\r\n              ...user,\r\n              fringeDataByMonth: {\r\n                ...user.fringeDataByMonth,\r\n                [monthKey]: {\r\n                  ...(user.fringeDataByMonth?.[monthKey] || {\r\n                    workingDays: calculateWorkingDays(user.workDays || 'mon-fri', selectedMonth, selectedYear),\r\n                    annualLeave: 0,\r\n                    sickLeave: 0,\r\n                    publicHolidays: 0,\r\n                    dailyRate: 0\r\n                  }),\r\n                  [field]: numValue\r\n                }\r\n              }\r\n            }\r\n          } else if (section === 'project' && projectId) {\r\n            return {\r\n              ...user,\r\n              projectDataByMonth: {\r\n                ...user.projectDataByMonth,\r\n                [monthKey]: {\r\n                  ...(user.projectDataByMonth?.[monthKey] || {}),\r\n                  [projectId]: numValue\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n        return user\r\n      })\r\n      \r\n      // Save to localStorage\r\n      const userData = getCurrentUserData()\r\n      const updatedUserData = {\r\n        ...userData,\r\n        users: updatedUsers.map(user => ({\r\n          ...user,\r\n          payrollDataByMonth: user.payrollDataByMonth,\r\n          fringeDataByMonth: user.fringeDataByMonth,\r\n          projectDataByMonth: user.projectDataByMonth\r\n        }))\r\n      }\r\n      \r\n      // Save to localStorage using the same key as the main app\r\n      const currentUser = getCurrentUser()\r\n      if (currentUser) {\r\n        const storageKey = `sola-user-data-${currentUser}`\r\n        localStorage.setItem(storageKey, JSON.stringify(updatedUserData))\r\n      }\r\n      \r\n      return updatedUsers\r\n    })\r\n  }\r\n\r\n  // Handle monthly allocation changes\r\n  const handleMonthlyAllocationChange = (itemId: string, field: keyof MonthlyAllocationItem, value: string | number) => {\r\n    // Prevent changes if locked\r\n    if (isLocked) return\r\n    \r\n    setMonthlyAllocation(prev => {\r\n      const updated = prev.map(item => {\r\n        if (item.id === itemId) {\r\n          return { ...item, [field]: value }\r\n        }\r\n        return item\r\n      })\r\n      \r\n      // Save to localStorage\r\n      const monthKey = `${selectedYear}-${selectedMonth}`\r\n      const user = getCurrentUser()\r\n      if (user) {\r\n        localStorage.setItem(`sola-monthly-allocation-${user}-${monthKey}`, JSON.stringify(updated))\r\n      }\r\n      \r\n      return updated\r\n    })\r\n  }\r\n\r\n  // Group users by entity\r\n  const groupedByEntity = users.reduce((acc: Record<string, UserExtended[]>, user: UserExtended) => {\r\n    const entity = user.entity || \"Unassigned\"\r\n    if (!acc[entity]) {\r\n      acc[entity] = []\r\n    }\r\n    acc[entity].push(user)\r\n    return acc\r\n  }, {} as Record<string, UserExtended[]>)\r\n\r\n  const activeProjects = getActiveProjects()\r\n\r\n  // Filter monthly allocation rows based on main table amounts and update currency and auto-calculate amounts\r\n  const filteredMonthlyAllocation = monthlyAllocation.flatMap(item => {\r\n    const user = users.find(u => u.id === item.name || u.name === item.name)\r\n    if (!user) return []\r\n    \r\n    const monthKey = `${selectedYear}-${selectedMonth}`\r\n    const payrollData = user.payrollDataByMonth?.[monthKey]\r\n    const fringeData = user.fringeDataByMonth?.[monthKey]\r\n    const projectData = user.projectDataByMonth?.[monthKey] || {}\r\n    \r\n    // Calculate total project hours for percentage calculation\r\n    const totalProjectHours = activeProjects.reduce((total, project) => total + (projectData[project.id] || 0), 0)\r\n    \r\n    // Calculate amount based on account type\r\n    let calculatedAmount = 0\r\n    const dailyRate = payrollData?.netSalary && fringeData?.workingDays ? payrollData.netSalary / fringeData.workingDays : 0\r\n    const leaveDeduction = ((fringeData?.annualLeave || 0) + (fringeData?.sickLeave || 0) + (fringeData?.publicHolidays || 0)) * dailyRate\r\n    const netSalaryForProjects = (payrollData?.netSalary || 0) - leaveDeduction\r\n    const fringeBenefitAmount = leaveDeduction\r\n    \r\n    // Get base amount for this account type\r\n    let baseAmount = 0\r\n    switch (item.account) {\r\n      case 'Net Salary [631 0001]':\r\n        baseAmount = netSalaryForProjects\r\n        break\r\n      case 'Social Security [635 1001]':\r\n        baseAmount = payrollData?.socialSecurity || 0\r\n        break\r\n      case 'Employee Tax [620 1005]':\r\n        baseAmount = payrollData?.employeeTax || 0\r\n        break\r\n      case 'Employer Tax [620 1005]':\r\n        baseAmount = payrollData?.employerTax || 0\r\n        break\r\n      case 'Housing [635 4001]':\r\n        baseAmount = payrollData?.housing || 0\r\n        break\r\n      case 'Other Benefits [602 4001]':\r\n        baseAmount = payrollData?.otherBenefits || 0\r\n        break\r\n      case 'Fringe Benefit - Leave [631 0001]':\r\n        baseAmount = fringeBenefitAmount\r\n        break\r\n      default:\r\n        baseAmount = 0\r\n    }\r\n    \r\n    // Create rows for each project that has allocated hours\r\n    const projectRows: MonthlyAllocationItem[] = []\r\n    if (totalProjectHours > 0 && baseAmount > 0) {\r\n      activeProjects.forEach(project => {\r\n        const projectHours = projectData[project.id] || 0\r\n        if (projectHours > 0) {\r\n          const projectPercentage = (projectHours / totalProjectHours) * 100\r\n          const calculatedAmount = baseAmount * projectPercentage / 100\r\n          \r\n          projectRows.push({\r\n            ...item,\r\n            id: `${item.id}-${project.id}`,\r\n            currency: payrollData?.currency || 'USD',\r\n            amount: parseFloat(calculatedAmount.toFixed(2)),\r\n            project: project.name\r\n          })\r\n        }\r\n      })\r\n    }\r\n    \r\n    return projectRows\r\n  }).filter(item => {\r\n    const user = users.find(u => u.id === item.name || u.name === item.name)\r\n    if (!user) return false\r\n    \r\n    const monthKey = `${selectedYear}-${selectedMonth}`\r\n    const payrollData = user.payrollDataByMonth?.[monthKey]\r\n    \r\n    // Check corresponding amount in main table based on account category\r\n    switch (item.account) {\r\n      case 'Net Salary [631 0001]':\r\n        return payrollData?.netSalary && payrollData.netSalary > 0\r\n      case 'Social Security [635 1001]':\r\n        return payrollData?.socialSecurity && payrollData.socialSecurity > 0\r\n      case 'Employee Tax [620 1005]':\r\n        return payrollData?.employeeTax && payrollData.employeeTax > 0\r\n      case 'Employer Tax [620 1005]':\r\n        return payrollData?.employerTax && payrollData.employerTax > 0\r\n      case 'Housing [635 4001]':\r\n        return payrollData?.housing && payrollData.housing > 0\r\n      case 'Other Benefits [602 4001]':\r\n        return payrollData?.otherBenefits && payrollData.otherBenefits > 0\r\n      case 'Fringe Benefit - Leave [631 0001]':\r\n        // For fringe benefit, check if any leave data exists\r\n        const fringeData = user.fringeDataByMonth?.[monthKey]\r\n        return (fringeData?.annualLeave && fringeData.annualLeave > 0) ||\r\n               (fringeData?.sickLeave && fringeData.sickLeave > 0) ||\r\n               (fringeData?.publicHolidays && fringeData.publicHolidays > 0)\r\n      default:\r\n        return true\r\n    }\r\n  })\r\n\r\n  const getContrastColor = (hex: string) => {\r\n    const r = parseInt(hex.slice(1, 3), 16)\r\n    const g = parseInt(hex.slice(3, 5), 16)\r\n    const b = parseInt(hex.slice(5, 7), 16)\r\n    const brightness = (r * 299 + g * 587 + b * 114) / 1000\r\n    return brightness > 128 ? \"#000\" : \"#fff\"\r\n  }\r\n\r\n  // Export functions\r\n  const exportToExcel = (data: any[], filename: string) => {\r\n    const worksheet = XLSX.utils.json_to_sheet(data)\r\n    const workbook = XLSX.utils.book_new()\r\n    XLSX.utils.book_append_sheet(workbook, worksheet, 'Sheet1')\r\n    XLSX.writeFile(workbook, `${filename}.xlsx`)\r\n  }\r\n\r\n  const exportMainTable = () => {\r\n    const exportData = users.map(user => {\r\n      const monthKey = `${selectedYear}-${selectedMonth}`\r\n      const payrollData = user.payrollDataByMonth?.[monthKey]\r\n      const fringeData = user.fringeDataByMonth?.[monthKey]\r\n      const projectData = user.projectDataByMonth?.[monthKey] || {}\r\n      \r\n      const row: any = {\r\n        Name: user.name,\r\n        Department: user.department,\r\n        Currency: payrollData?.currency || 'USD',\r\n        'Net Salary': payrollData?.netSalary || 0,\r\n        'Social Security': payrollData?.socialSecurity || 0,\r\n        'Employee Tax': payrollData?.employeeTax || 0,\r\n        'Employer Tax': payrollData?.employerTax || 0,\r\n        'Housing': payrollData?.housing || 0,\r\n        'Other Benefits': payrollData?.otherBenefits || 0,\r\n        'Annual Leave': fringeData?.annualLeave || 0,\r\n        'Sick Leave': fringeData?.sickLeave || 0,\r\n        'Public Holidays': fringeData?.publicHolidays || 0,\r\n        'Working Days': fringeData?.workingDays || 0,\r\n        'Daily Rate': payrollData?.netSalary && fringeData?.workingDays ? (payrollData.netSalary / fringeData.workingDays).toFixed(2) : '0.00'\r\n      }\r\n      \r\n      // Add project columns\r\n      activeProjects.forEach(project => {\r\n        row[project.name] = projectData[project.id] || 0\r\n      })\r\n      \r\n      return row\r\n    })\r\n    \r\n    exportToExcel(exportData, `Actual_Allocation_${MONTHS[selectedMonth]}_${selectedYear}`)\r\n  }\r\n\r\n  const exportMonthlyTable = () => {\r\n    const exportData = filteredMonthlyAllocation.map(item => {\r\n      // Split account into name and code\r\n      const accountName = item.account.split(' [')[0]\r\n      const accountCode = item.account.includes(' [') ? item.account.split(' [')[1].replace(']', '') : ''\r\n      \r\n      return {\r\n        'Account Name': accountName,\r\n        'Account Code': accountCode,\r\n        Description: item.description,\r\n        Currency: item.currency,\r\n        Amount: item.amount,\r\n        Project: item.project,\r\n        'Project Task': item.projectTask\r\n      }\r\n    })\r\n    \r\n    exportToExcel(exportData, `Monthly_Allocation_${MONTHS[selectedMonth]}_${selectedYear}`)\r\n  }\r\n\r\n  return (\r\n    <div className=\"p-6\">\r\n      <nav className=\"bg-white border-b border-gray-200 px-6 py-3 mb-6\">\r\n        <div className=\"flex items-center gap-6\">\r\n          <h1 className=\"text-lg font-semibold text-gray-900\">Staff Allocation Tool</h1>\r\n          <div className=\"flex gap-4\">\r\n            <Link \r\n              href=\"/\" \r\n              className=\"text-gray-600 hover:text-gray-800 font-medium\"\r\n            >\r\n              Allocation\r\n            </Link>\r\n            <Link \r\n              href=\"/planning\" \r\n              className=\"text-gray-600 hover:text-gray-800 font-medium\"\r\n            >\r\n              Planning\r\n            </Link>\r\n            <Link \r\n              href=\"/actual-allocation\" \r\n              className=\"text-blue-600 hover:text-blue-800 font-medium\"\r\n            >\r\n              Actual Allocation\r\n            </Link>\r\n          </div>\r\n          <div className=\"ml-auto flex gap-2 items-center\">\r\n            {isClient && isAdmin() && (\r\n              <Button\r\n                onClick={toggleLock}\r\n                variant={isLocked ? \"destructive\" : \"outline\"}\r\n                size=\"sm\"\r\n                className=\"font-medium\"\r\n              >\r\n                {isLocked ? \"ðŸ”’ Locked\" : \"ðŸ”“ Lock\"}\r\n              </Button>\r\n            )}\r\n            {isClient && (\r\n              <Button\r\n                onClick={() => setShowPercentage(!showPercentage)}\r\n                variant={showPercentage ? \"default\" : \"outline\"}\r\n                size=\"sm\"\r\n                className=\"font-medium\"\r\n              >\r\n                {showPercentage ? \"ðŸ”¢ Values\" : \"ðŸ“Š % View\"}\r\n              </Button>\r\n            )}\r\n            <select\r\n              value={selectedMonth}\r\n              onChange={(e) => setSelectedMonth(Number(e.target.value))}\r\n              className=\"border border-gray-300 rounded px-2 py-1 text-sm\"\r\n            >\r\n              {MONTHS.map((month, idx) => (\r\n                <option key={idx} value={idx}>{month}</option>\r\n              ))}\r\n            </select>\r\n            <select\r\n              value={selectedYear}\r\n              onChange={(e) => setSelectedYear(Number(e.target.value))}\r\n              className=\"border border-gray-300 rounded px-2 py-1 text-sm\"\r\n            >\r\n              {[2023, 2024, 2025, 2026, 2027].map(year => (\r\n                <option key={year} value={year}>{year}</option>\r\n              ))}\r\n            </select>\r\n            <Button\r\n              onClick={() => {\r\n                const user = getCurrentUser()\r\n                if (user) {\r\n                  clearCurrentUser()\r\n                  window.location.href = \"/login\"\r\n                }\r\n              }}\r\n              variant=\"outline\"\r\n              size=\"sm\"\r\n            >\r\n              Logout\r\n            </Button>\r\n          </div>\r\n        </div>\r\n      </nav>\r\n\r\n      <div className=\"flex justify-between items-center mb-4\">\r\n        <h2 className=\"text-lg font-semibold text-gray-800\">Actual Allocation</h2>\r\n        <Button\r\n          onClick={exportMainTable}\r\n          variant=\"outline\"\r\n          size=\"sm\"\r\n          className=\"font-medium\"\r\n        >\r\n          ðŸ“Š Export to Excel\r\n        </Button>\r\n      </div>\r\n\r\n      <div className=\"overflow-x-auto\">\r\n        <table className=\"w-full border-collapse border border-gray-300 text-xs\">\r\n          <thead>\r\n            <tr>\r\n              <th className=\"border border-gray-300 p-1 bg-gray-100 w-32\">Name</th>\r\n              <th className=\"border border-gray-300 p-1 bg-gray-100 w-32\">Department</th>\r\n              <th className=\"border border-gray-300 p-1 bg-gray-100 text-center\" colSpan={7}>Payroll</th>\r\n              <th className=\"border border-gray-300 p-1 bg-gray-100 text-center\" colSpan={5}>Fringe</th>\r\n              <th className=\"border border-gray-300 p-1 bg-gray-100 text-center\" colSpan={activeProjects.length + 1}>Projects</th>\r\n            </tr>\r\n            <tr>\r\n              <th className=\"border border-gray-300 p-1 bg-gray-50 w-32 text-xs text-muted-foreground\"></th>\r\n              <th className=\"border border-gray-300 p-1 bg-gray-50 w-32 text-xs text-muted-foreground\"></th>\r\n              {/* Payroll columns */}\r\n              <th className=\"border border-gray-300 p-1 bg-gray-50 text-xs text-muted-foreground\">Currency</th>\r\n              <th className=\"border border-gray-300 p-1 bg-gray-50 text-xs text-muted-foreground\">Net Salary <span style={{fontSize: '10px', opacity: 0.7}}>[631 0001]</span></th>\r\n              <th className=\"border border-gray-300 p-1 bg-gray-50 text-xs text-muted-foreground\">Social Security <span style={{fontSize: '10px', opacity: 0.7}}>[635 1001]</span></th>\r\n              <th className=\"border border-gray-300 p-1 bg-gray-50 text-xs text-muted-foreground\">Employee Tax <span style={{fontSize: '10px', opacity: 0.7}}>[620 1005]</span></th>\r\n              <th className=\"border border-gray-300 p-1 bg-gray-50 text-xs text-muted-foreground\">Employer Tax <span style={{fontSize: '10px', opacity: 0.7}}>[620 1005]</span></th>\r\n              <th className=\"border border-gray-300 p-1 bg-gray-50 text-xs text-muted-foreground\">Housing <span style={{fontSize: '10px', opacity: 0.7}}>[635 4001]</span></th>\r\n              <th className=\"border border-gray-300 p-1 bg-gray-50 text-xs text-muted-foreground\">Other Benefits <span style={{fontSize: '10px', opacity: 0.7}}>[602 4001]</span></th>\r\n              {/* Fringe columns */}\r\n              <th className=\"border border-gray-300 p-1 bg-gray-50 text-xs text-muted-foreground\">Working Days</th>\r\n              <th className=\"border border-gray-300 p-1 bg-gray-50 text-xs text-muted-foreground\">Annual Leave</th>\r\n              <th className=\"border border-gray-300 p-1 bg-gray-50 text-xs text-muted-foreground\">Sick Leave</th>\r\n              <th className=\"border border-gray-300 p-1 bg-gray-50 text-xs text-muted-foreground\">Public Holidays</th>\r\n              <th className=\"border border-gray-300 p-1 bg-gray-50 text-xs text-muted-foreground\">Daily Rate</th>\r\n              {/* Project columns */}\r\n              {activeProjects.map(project => (\r\n                <th key={project.id} className=\"border border-gray-300 p-1 bg-gray-50 text-xs text-muted-foreground\" style={{ backgroundColor: project.color + '20', color: '#000' }}>\r\n                  {project.name}\r\n                </th>\r\n              ))}\r\n              <th className=\"border border-gray-300 p-1 bg-gray-50 text-xs text-muted-foreground\">Total</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {Object.entries(groupedByEntity).map(([entity, entityUsers]) => {\r\n              // Calculate total payroll amounts for this entity\r\n              const monthKey = `${selectedYear}-${selectedMonth}`\r\n              const entityTotals = entityUsers.reduce((totals, user) => {\r\n                const payrollData = user.payrollDataByMonth?.[monthKey]\r\n                if (payrollData) {\r\n                  totals.netSalary += payrollData.netSalary || 0\r\n                  totals.socialSecurity += payrollData.socialSecurity || 0\r\n                  totals.employeeTax += payrollData.employeeTax || 0\r\n                  totals.employerTax += payrollData.employerTax || 0\r\n                  totals.housing += payrollData.housing || 0\r\n                  totals.otherBenefits += payrollData.otherBenefits || 0\r\n                }\r\n                return totals\r\n              }, {\r\n                netSalary: 0,\r\n                socialSecurity: 0,\r\n                employeeTax: 0,\r\n                employerTax: 0,\r\n                housing: 0,\r\n                otherBenefits: 0\r\n              })\r\n              \r\n              const grandTotal = entityTotals.netSalary + entityTotals.socialSecurity + entityTotals.employeeTax + \r\n                               entityTotals.employerTax + entityTotals.housing + entityTotals.otherBenefits\r\n              \r\n              return (\r\n              <React.Fragment key={entity}>\r\n                <tr>\r\n                  <td className=\"border border-gray-300 p-1 font-semibold text-xs text-gray-800 bg-cyan-200\">\r\n                    {entity}\r\n                  </td>\r\n                  <td className=\"border border-gray-300 p-1 font-semibold text-xs text-gray-800 bg-cyan-200 text-right\">\r\n                    ({grandTotal.toFixed(2)})\r\n                  </td>\r\n                  <td className=\"border border-gray-300 p-1 bg-cyan-200\"></td>\r\n                  <td className=\"border border-gray-300 p-1 bg-cyan-200\"></td>\r\n                  <td className=\"border border-gray-300 p-1 bg-cyan-200\"></td>\r\n                  <td className=\"border border-gray-300 p-1 bg-cyan-200\"></td>\r\n                  <td className=\"border border-gray-300 p-1 bg-cyan-200\"></td>\r\n                  <td className=\"border border-gray-300 p-1 bg-cyan-200\"></td>\r\n                  <td className=\"border border-gray-300 p-1 bg-cyan-200\"></td>\r\n                  <td className=\"border border-gray-300 p-1 bg-cyan-200\"></td>\r\n                  <td className=\"border border-gray-300 p-1 bg-cyan-200\"></td>\r\n                  <td className=\"border border-gray-300 p-1 bg-cyan-200\"></td>\r\n                  <td className=\"border border-gray-300 p-1 bg-cyan-200\"></td>\r\n                  <td className=\"border border-gray-300 p-1 bg-cyan-200\"></td>\r\n                  {/* Project average percentages */}\r\n                  {activeProjects.map(project => {\r\n                    // Calculate average percentage for this entity and project across ALL users\r\n                    const userPercentages = entityUsers.map(user => {\r\n                      const projectData = user.projectDataByMonth?.[monthKey] || {}\r\n                      const totalHours = activeProjects.reduce((total, p) => total + (projectData[p.id] || 0), 0)\r\n                      const projectHours = projectData[project.id] || 0\r\n                      return totalHours > 0 ? (projectHours / totalHours * 100) : 0\r\n                    })\r\n                    \r\n                    const avgPercentage = userPercentages.length > 0 \r\n                      ? userPercentages.reduce((sum, percentage) => sum + percentage, 0) / userPercentages.length\r\n                      : 0\r\n                    \r\n                    return (\r\n                      <td key={project.id} className=\"border border-gray-300 p-1 bg-cyan-200\">\r\n                        <div className=\"w-full text-xs text-center font-medium\">\r\n                          {showPercentage && avgPercentage > 0 ? avgPercentage.toFixed(1) + '%' : ''}\r\n                        </div>\r\n                      </td>\r\n                    )\r\n                  })}\r\n                  <td className=\"border border-gray-300 p-1 bg-cyan-200\"></td>\r\n                </tr>\r\n                {entityUsers.map((user) => {\r\n                  const monthKey = `${selectedYear}-${selectedMonth}`\r\n                  const payrollData = user.payrollDataByMonth?.[monthKey]\r\n                  const fringeData = user.fringeDataByMonth?.[monthKey]\r\n                  const projectData = user.projectDataByMonth?.[monthKey] || {}\r\n                  \r\n                  return (\r\n                  <tr key={user.id}>\r\n                    <td className=\"border border-gray-300 p-0.5 w-32\">\r\n                      <span className=\"text-xs leading-tight\">{user.name}</span>\r\n                    </td>\r\n                    <td className=\"border border-gray-300 p-0.5 w-32\">\r\n                      <span className=\"text-xs leading-tight text-gray-600\">{user.department}</span>\r\n                    </td>\r\n                    {/* Payroll data - editable */}\r\n                    <td className=\"border border-gray-300 p-0.5\">\r\n                      <input\r\n                        type=\"text\"\r\n                        value={payrollData?.currency || \"\"}\r\n                        onChange={(e) => handleCellValueChange(user.id, \"currency\", e.target.value, \"payroll\")}\r\n                        className=\"w-full text-xs text-center border-0 bg-transparent focus:outline-none focus:ring-1 focus:ring-blue-500 rounded\"\r\n                        placeholder=\"USD\"\r\n                        disabled={isLocked}\r\n                        style={{ backgroundColor: isLocked ? '#f3f4f6' : 'transparent' }}\r\n                      />\r\n                    </td>\r\n                    <td className=\"border border-gray-300 p-0.5\">\r\n                      <input\r\n                        type=\"number\"\r\n                        value={payrollData?.netSalary || \"\"}\r\n                        onChange={(e) => handleCellValueChange(user.id, \"netSalary\", e.target.value, \"payroll\")}\r\n                        className=\"w-full text-xs text-right border-0 bg-transparent focus:outline-none focus:ring-1 focus:ring-blue-500 rounded\"\r\n                        placeholder=\"0\"\r\n                        disabled={isLocked}\r\n                        style={{ backgroundColor: isLocked ? '#f3f4f6' : 'transparent' }}\r\n                      />\r\n                    </td>\r\n                    <td className=\"border border-gray-300 p-0.5\">\r\n                      <input\r\n                        type=\"number\"\r\n                        value={payrollData?.socialSecurity || \"\"}\r\n                        onChange={(e) => handleCellValueChange(user.id, \"socialSecurity\", e.target.value, \"payroll\")}\r\n                        className=\"w-full text-xs text-right border-0 bg-transparent focus:outline-none focus:ring-1 focus:ring-blue-500 rounded\"\r\n                        placeholder=\"0\"\r\n                        disabled={isLocked}\r\n                        style={{ backgroundColor: isLocked ? '#f3f4f6' : 'transparent' }}\r\n                      />\r\n                    </td>\r\n                    <td className=\"border border-gray-300 p-0.5\">\r\n                      <input\r\n                        type=\"number\"\r\n                        value={payrollData?.employeeTax || \"\"}\r\n                        onChange={(e) => handleCellValueChange(user.id, \"employeeTax\", e.target.value, \"payroll\")}\r\n                        className=\"w-full text-xs text-right border-0 bg-transparent focus:outline-none focus:ring-1 focus:ring-blue-500 rounded\"\r\n                        placeholder=\"0\"\r\n                        disabled={isLocked}\r\n                        style={{ backgroundColor: isLocked ? '#f3f4f6' : 'transparent' }}\r\n                      />\r\n                    </td>\r\n                    <td className=\"border border-gray-300 p-0.5\">\r\n                      <input\r\n                        type=\"number\"\r\n                        value={payrollData?.employerTax || \"\"}\r\n                        onChange={(e) => handleCellValueChange(user.id, \"employerTax\", e.target.value, \"payroll\")}\r\n                        className=\"w-full text-xs text-right border-0 bg-transparent focus:outline-none focus:ring-1 focus:ring-blue-500 rounded\"\r\n                        placeholder=\"0\"\r\n                        disabled={isLocked}\r\n                        style={{ backgroundColor: isLocked ? '#f3f4f6' : 'transparent' }}\r\n                      />\r\n                    </td>\r\n                    <td className=\"border border-gray-300 p-0.5\">\r\n                      <input\r\n                        type=\"number\"\r\n                        value={payrollData?.housing || \"\"}\r\n                        onChange={(e) => handleCellValueChange(user.id, \"housing\", e.target.value, \"payroll\")}\r\n                        className=\"w-full text-xs text-right border-0 bg-transparent focus:outline-none focus:ring-1 focus:ring-blue-500 rounded\"\r\n                        placeholder=\"0\"\r\n                        disabled={isLocked}\r\n                        style={{ backgroundColor: isLocked ? '#f3f4f6' : 'transparent' }}\r\n                      />\r\n                    </td>\r\n                    <td className=\"border border-gray-300 p-0.5\">\r\n                      <input\r\n                        type=\"number\"\r\n                        value={payrollData?.otherBenefits || \"\"}\r\n                        onChange={(e) => handleCellValueChange(user.id, \"otherBenefits\", e.target.value, \"payroll\")}\r\n                        className=\"w-full text-xs text-right border-0 bg-transparent focus:outline-none focus:ring-1 focus:ring-blue-500 rounded\"\r\n                        placeholder=\"0\"\r\n                        disabled={isLocked}\r\n                        style={{ backgroundColor: isLocked ? '#f3f4f6' : 'transparent' }}\r\n                      />\r\n                    </td>\r\n                    {/* Fringe data - editable */}\r\n                    <td className=\"border border-gray-300 p-0.5 bg-gray-50\">\r\n                      <div className=\"w-full text-xs text-center font-medium\">\r\n                        {fringeData?.workingDays || 0}\r\n                      </div>\r\n                    </td>\r\n                    <td className=\"border border-gray-300 p-0.5\">\r\n                      <input\r\n                        type=\"number\"\r\n                        value={fringeData?.annualLeave || \"\"}\r\n                        onChange={(e) => handleCellValueChange(user.id, \"annualLeave\", e.target.value, \"fringe\")}\r\n                        className=\"w-full text-xs text-center border-0 bg-transparent focus:outline-none focus:ring-1 focus:ring-blue-500 rounded\"\r\n                        placeholder=\"0\"\r\n                        disabled={isLocked}\r\n                        style={{ backgroundColor: isLocked ? '#f3f4f6' : 'transparent' }}\r\n                      />\r\n                    </td>\r\n                    <td className=\"border border-gray-300 p-0.5\">\r\n                      <input\r\n                        type=\"number\"\r\n                        value={fringeData?.sickLeave || \"\"}\r\n                        onChange={(e) => handleCellValueChange(user.id, \"sickLeave\", e.target.value, \"fringe\")}\r\n                        className=\"w-full text-xs text-center border-0 bg-transparent focus:outline-none focus:ring-1 focus:ring-blue-500 rounded\"\r\n                        placeholder=\"0\"\r\n                        disabled={isLocked}\r\n                        style={{ backgroundColor: isLocked ? '#f3f4f6' : 'transparent' }}\r\n                      />\r\n                    </td>\r\n                    <td className=\"border border-gray-300 p-0.5\">\r\n                      <input\r\n                        type=\"number\"\r\n                        value={fringeData?.publicHolidays || \"\"}\r\n                        onChange={(e) => handleCellValueChange(user.id, \"publicHolidays\", e.target.value, \"fringe\")}\r\n                        className=\"w-full text-xs text-center border-0 bg-transparent focus:outline-none focus:ring-1 focus:ring-blue-500 rounded\"\r\n                        placeholder=\"0\"\r\n                        disabled={isLocked}\r\n                        style={{ backgroundColor: isLocked ? '#f3f4f6' : 'transparent' }}\r\n                      />\r\n                    </td>\r\n                    <td className=\"border border-gray-300 p-0.5 bg-gray-50\">\r\n                      <div className=\"w-full text-xs text-right font-medium\">\r\n                        {payrollData?.netSalary && fringeData?.workingDays \r\n                          ? (payrollData.netSalary / fringeData.workingDays).toFixed(2)\r\n                          : \"0.00\"\r\n                        }\r\n                      </div>\r\n                    </td>\r\n                    {/* Project data - editable */}\r\n                    {activeProjects.map(project => {\r\n                      const totalProjectHours = activeProjects.reduce((total, p) => total + (projectData[p.id] || 0), 0)\r\n                      const projectHours = projectData[project.id] || 0\r\n                      const percentage = totalProjectHours > 0 ? (projectHours / totalProjectHours * 100).toFixed(1) : '0.0'\r\n                      \r\n                      return (\r\n                        <td key={project.id} className=\"border border-gray-300 p-0.5\" style={{ backgroundColor: project.color + '10' }}>\r\n                          {showPercentage ? (\r\n                            <div className=\"w-full text-xs text-center\" style={{ backgroundColor: isLocked ? '#f3f4f6' : '#f9fafb' }}>\r\n                              {percentage}%\r\n                            </div>\r\n                          ) : (\r\n                            <input\r\n                              type=\"number\"\r\n                              value={projectData[project.id] || \"\"}\r\n                              onChange={(e) => handleCellValueChange(user.id, project.id, e.target.value, \"project\", project.id)}\r\n                              className=\"w-full text-xs text-center border-0 bg-transparent focus:outline-none focus:ring-1 focus:ring-blue-500 rounded\"\r\n                              placeholder=\"0\"\r\n                              min=\"0\"\r\n                              max=\"100\"\r\n                              disabled={isLocked}\r\n                              style={{ backgroundColor: isLocked ? '#f3f4f6' : 'transparent' }}\r\n                            />\r\n                          )}\r\n                        </td>\r\n                      )\r\n                    })}\r\n                    <td className=\"border border-gray-300 p-0.5 bg-gray-50\">\r\n                      <div className=\"w-full text-xs text-right font-medium\">\r\n                        {showPercentage ? \r\n                          \"100%\" :\r\n                          activeProjects.reduce((total, project) => total + (projectData[project.id] || 0), 0)\r\n                        }\r\n                      </div>\r\n                    </td>\r\n                  </tr>\r\n                  )\r\n                })}\r\n              </React.Fragment>\r\n              )\r\n            })}\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n\r\n      {users.length === 0 && (\r\n        <div className=\"text-center py-8 text-gray-500\">\r\n          No staff data available. Please add staff members first.\r\n        </div>\r\n      )}\r\n\r\n      {/* Monthly Allocation Table */}\r\n      <div className=\"mt-8\">\r\n        <div className=\"flex justify-between items-center mb-4\">\r\n          <h2 className=\"text-lg font-semibold text-gray-800\">Monthly Allocation</h2>\r\n          <Button\r\n            onClick={exportMonthlyTable}\r\n            variant=\"outline\"\r\n            size=\"sm\"\r\n            className=\"font-medium\"\r\n          >\r\n            ðŸ“Š Export to Excel\r\n          </Button>\r\n        </div>\r\n        <div className=\"overflow-x-auto\">\r\n          <table className=\"w-full border-collapse border border-gray-300 text-xs\">\r\n            <thead>\r\n              <tr>\r\n                <th className=\"border border-gray-300 p-1 bg-gray-100 text-center\" colSpan={7}>Monthly Allocation</th>\r\n              </tr>\r\n              <tr>\r\n                <th className=\"border border-gray-300 p-1 bg-gray-50 text-xs text-muted-foreground\">Account Name</th>\r\n                <th className=\"border border-gray-300 p-1 bg-gray-50 text-xs text-muted-foreground\">Account Code</th>\r\n                <th className=\"border border-gray-300 p-1 bg-gray-50 text-xs text-muted-foreground\">Description</th>\r\n                <th className=\"border border-gray-300 p-1 bg-gray-50 text-xs text-muted-foreground\">Currency</th>\r\n                <th className=\"border border-gray-300 p-1 bg-gray-50 text-xs text-muted-foreground\">Amount</th>\r\n                <th className=\"border border-gray-300 p-1 bg-gray-50 text-xs text-muted-foreground\">Project</th>\r\n                <th className=\"border border-gray-300 p-1 bg-gray-50 text-xs text-muted-foreground\">Project Task</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {filteredMonthlyAllocation.map((item) => {\r\n                // Split account into name and code\r\n                const accountName = item.account.split(' [')[0]\r\n                const accountCode = item.account.includes(' [') ? item.account.split(' [')[1].replace(']', '') : ''\r\n                \r\n                return (\r\n                <tr key={item.id}>\r\n                  <td className=\"border border-gray-300 p-0.5\">\r\n                    <span className=\"text-xs leading-tight\">\r\n                      {accountName}\r\n                    </span>\r\n                  </td>\r\n                  <td className=\"border border-gray-300 p-0.5\">\r\n                    <span className=\"text-xs leading-tight\">\r\n                      {accountCode}\r\n                    </span>\r\n                  </td>\r\n                  <td className=\"border border-gray-300 p-0.5\">\r\n                    <div className=\"w-full text-xs text-center\" style={{ backgroundColor: isLocked ? '#f3f4f6' : '#f9fafb' }}>\r\n                      {item.description}\r\n                    </div>\r\n                  </td>\r\n                  <td className=\"border border-gray-300 p-0.5\">\r\n                    <input\r\n                      type=\"text\"\r\n                      value={item.currency}\r\n                      onChange={(e) => handleMonthlyAllocationChange(item.id, 'currency', e.target.value)}\r\n                      className=\"w-full text-xs text-center border-0 bg-transparent focus:outline-none focus:ring-1 focus:ring-blue-500 rounded\"\r\n                      placeholder=\"USD\"\r\n                      disabled={isLocked}\r\n                      style={{ backgroundColor: isLocked ? '#f3f4f6' : 'transparent' }}\r\n                    />\r\n                  </td>\r\n                  <td className=\"border border-gray-300 p-0.5\">\r\n                    <div className=\"w-full text-xs text-right\" style={{ backgroundColor: isLocked ? '#f3f4f6' : '#f9fafb' }}>\r\n                      {item.amount.toFixed(2)}\r\n                    </div>\r\n                  </td>\r\n                  <td className=\"border border-gray-300 p-0.5\">\r\n                    <div className=\"w-full text-xs text-center\" style={{ backgroundColor: isLocked ? '#f3f4f6' : '#f9fafb' }}>\r\n                      {item.project}\r\n                    </div>\r\n                  </td>\r\n                  <td className=\"border border-gray-300 p-0.5\">\r\n                    <input\r\n                      type=\"text\"\r\n                      value={item.projectTask}\r\n                      onChange={(e) => handleMonthlyAllocationChange(item.id, 'projectTask', e.target.value)}\r\n                      className=\"w-full text-xs text-center border-0 bg-transparent focus:outline-none focus:ring-1 focus:ring-blue-500 rounded\"\r\n                      placeholder=\"Enter task\"\r\n                      disabled={isLocked}\r\n                      style={{ backgroundColor: isLocked ? '#f3f4f6' : 'transparent' }}\r\n                    />\r\n                  </td>\r\n                </tr>\r\n                )\r\n              })}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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"}}]
}